{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrastyle %}
{{ block.super }}
<link rel="stylesheet" href="{% static 'admin/css/forms.css' %}">
<style>
    .form-row {
        padding: 4px 0;
        border-bottom: 1px solid #eee;
    }
    .form-row label {
        display: inline-block;
        width: 200px;
        font-weight: bold;
    }
    .form-row .readonly {
        display: inline-block;
        padding: 4px 8px;
        background-color: #f5f5f5;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    .json-data {
        background-color: #f5f5f5;
        padding: 10px;
        border-radius: 4px;
        overflow-x: auto;
        font-family: monospace;
        white-space: pre-wrap;
    }
    .map-container {
        margin-top: 20px;
        border: 1px solid #ccc;
        border-radius: 4px;
        overflow: hidden;
    }
</style>
{% endblock %}

{% block content %}
<div id="content-main">
    {% if form.latitude.value and form.longitude.value %}
    <fieldset class="module aligned">
        <h2>Location Map</h2>
        <div class="map-container">
            <iframe width="100%" height="300" frameborder="0" style="border: 1px solid #ccc" 
                    src="https://www.google.com/maps/embed/v1/place?key=AIzaSyBFw0Qbyq9zTFTd-tUY6dZWTgaQzuU17R8&q={{ form.latitude.value }},{{ form.longitude.value }}&zoom=12" 
                    allowfullscreen></iframe>
        </div>
    </fieldset>
    {% endif %}

    <fieldset class="module aligned">
        <h2>Basic Information</h2>
        {% for field in form %}
            <div class="form-row">
                <label>{{ field.label }}:</label>
                <div class="readonly">{{ field.value|default:"-" }}</div>
            </div>
        {% endfor %}
    </fieldset>

    <fieldset class="module aligned">
        <h2>JSON Data</h2>
        {% if ip_data %}
            <div class="form-row">
                <label>IP Data:</label>
                <pre class="json-data">{{ ip_data }}</pre>
            </div>
        {% endif %}
        
        {% if user_agent_data %}
            <div class="form-row">
                <label>User Agent Data:</label>
                <pre class="json-data">{{ user_agent_data }}</pre>
            </div>
        {% endif %}
        
        {% if header_data %}
            <div class="form-row">
                <label>Header Data:</label>
                <pre class="json-data">{{ header_data }}</pre>
            </div>
        {% endif %}
        
        {% if form_data %}
            <div class="form-row">
                <label>Form Data:</label>
                <pre class="json-data">{{ form_data }}</pre>
            </div>
        {% endif %}
    </fieldset>
</div>
{% endblock %} 